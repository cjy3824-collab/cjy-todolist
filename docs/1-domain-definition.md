# cjy-todoList 도메인 정의서

## 1. 프로젝트 개요

**프로젝트명**: cjy-todoList

**목적**: 사용자 인증 기반의 개인 할 일 관리 시스템으로, 각 사용자가 자신의 할 일을 생성, 조회, 수정, 삭제할 수 있으며, 만료 기간 관리와 국경일 통합 기능을 제공하는 웹 애플리케이션

**핵심 가치**:

- 사용자별 독립적인 할 일 관리
- 기한 기반의 체계적인 일정 관리
- 공휴일 정보와 통합된 캘린더 뷰
- 안전한 삭제 및 복구 메커니즘

## 2. 핵심 도메인 개념

### 2.1 사용자 인증 (User Authentication)

- 모든 기능은 인증된 사용자만 접근 가능
- 사용자별로 독립된 할 일 목록 관리

### 2.2 할 일 관리 (Todo Management)

- 개인 할 일: 사용자가 직접 생성하고 관리하는 할 일
- 공통 할 일: 국경일과 같이 시스템에서 제공하는 공통 일정

### 2.3 소프트 삭제 (Soft Delete)

- 삭제된 할 일은 즉시 제거되지 않고 휴지통으로 이동
- 휴지통에서 복구 또는 영구 삭제 가능

### 2.4 캘린더 통합 (Calendar Integration)

- 할 일의 기한을 캘린더 형식으로 시각화
- 개인 할 일과 국경일을 함께 표시

## 3. 주요 엔티티 및 속성

### 3.1 사용자 (User)

- **userId**: 사용자 고유 식별자
- **username**: 사용자명 (로그인 ID)
- **password**: 암호화된 비밀번호
- **email**: 이메일 주소
- **createdAt**: 계정 생성일시
- **updatedAt**: 계정 수정일시

### 3.2 할 일 (Todo)

- **todoId**: 할 일 고유 식별자
- **userId**: 소유자 (외래키, null 가능 - 공통 할 일의 경우)
- **title**: 할 일 제목
- **description**: 할 일 상세 설명
- **startDate**: 시작일 (선택)
- **dueDate**: 만료 기한 (선택)
- **isCompleted**: 완료 여부
- **isPublicHoliday**: 국경일 여부
- **isDeleted**: 삭제 여부 (소프트 삭제)
- **deletedAt**: 삭제 일시
- **createdAt**: 생성 일시
- **updatedAt**: 수정 일시

### 3.3 휴지통 (Trash)

- 논리적 개념으로 `Todo.isDeleted = true`인 항목들의 집합

## 4. 주요 유스케이스

### 4.1 사용자 인증

- **UC-01**: 사용자 회원가입
- **UC-02**: 사용자 로그인
- **UC-03**: 사용자 로그아웃

### 4.2 할 일 CRUD

- **UC-04**: 할 일 목록 조회 (본인 소유 + 국경일)
- **UC-05**: 할 일 상세 조회
- **UC-06**: 새로운 할 일 추가
- **UC-07**: 기존 할 일 수정 (본인 소유만)
- **UC-08**: 할 일 완료 상태 토글
- **UC-09**: 할 일 삭제 (휴지통으로 이동)

### 4.3 휴지통 관리

- **UC-10**: 휴지통 항목 조회
- **UC-11**: 휴지통에서 할 일 복구
- **UC-12**: 할 일 영구 삭제

### 4.4 캘린더 뷰

- **UC-13**: 캘린더 형식으로 할 일 조회
- **UC-14**: 특정 날짜의 할 일 조회
- **UC-15**: 월별 할 일 요약 조회

### 4.5 국경일 관리

- **UC-16**: 국경일 조회 (모든 사용자 공통)

## 5. 비즈니스 규칙

### 5.1 인증 및 권한

- **BR-01**: 모든 할 일 관리 기능은 로그인한 사용자만 접근 가능
- **BR-02**: 사용자는 본인이 생성한 할 일만 수정/삭제 가능
- **BR-03**: 국경일은 조회만 가능하며 관리자만 수정/삭제 가능

### 5.2 할 일 관리

- **BR-04**: 할 일 제목은 필수 입력 항목
- **BR-05**: 만료 기한은 과거 날짜도 입력 가능 (이미 지난 할 일 등록 허용)
- **BR-06**: 사용자는 자신의 할 일과 국경일을 함께 조회 가능

### 5.3 삭제 및 복구

- **BR-07**: 할 일 삭제 시 즉시 제거되지 않고 휴지통으로 이동 (isDeleted = true)
- **BR-08**: 휴지통의 할 일은 복구 또는 영구 삭제 가능
- **BR-09**: 영구 삭제된 할 일은 복구 불가
- **BR-10**: 휴지통의 할 일은 일반 목록 조회에서 제외

### 5.4 국경일

- **BR-11**: 국경일은 userId가 null인 공통 할 일로 관리
- **BR-12**: 국경일은 시스템 관리자만 생성/수정/삭제 가능 (일반 사용자 생성 불가)
- **BR-13**: 국경일은 모든 사용자에게 동일하게 표시

### 5.5 캘린더 표시

- **BR-14**: 캘린더에는 개인 할 일과 국경일이 함께 표시
- **BR-15**: 만료 기한이 없는 할 일은 캘린더에 표시되지 않음
- **BR-16**: 삭제된 할 일(휴지통)은 캘린더에 표시되지 않음

## 6. 제약사항

### 6.1 기술적 제약사항

- **C-01**: 사용자 비밀번호는 반드시 암호화하여 저장
- **C-02**: 동시성 제어: 동일 할 일에 대한 동시 수정 시 낙관적 잠금 또는 버전 관리 필요
- **C-03**: 삭제된 데이터는 물리적으로 삭제하지 않고 소프트 삭제 방식 사용
- **C-04**: 토큰(JWT) 기반 인증 방식 적용
- **C-05**: 토큰은 access_token, refresh_token을 함께 사용하도록 할 것

### 6.2 보안 제약사항

- **C-06**: 인증되지 않은 사용자의 API 접근 차단
- **C-07**: 사용자는 타인의 할 일에 접근 불가
- **C-08**: JWT 토큰 기반 인증 구현 (C-04, C-05 참조)

### 6.3 데이터 제약사항

- **C-09**: 할 일 제목은 최대 200자로 제한
- **C-10**: 할 일 설명은 최대 2000자로 제한
- **C-11**: 사용자명은 고유해야 함 (중복 불가)
- **C-12**: 만료일은 시작일 이전일 수 없음

### 6.4 비즈니스 제약사항

- **C-13**: 휴지통의 할 일은 일정 기간(예: 30일) 후 자동 삭제 가능 (선택적 구현)
- **C-14**: 국경일 데이터는 외부 API 또는 정적 데이터로 관리
- **C-15**: 완료된 할 일은 수정 및 삭제 불가능

### 6.5 UI/UX 제약사항

- **C-16**: 캘린더는 월 단위 또는 주 단위로 표시
- **C-17**: 만료 기한이 임박한 할 일은 시각적으로 강조 표시 권장
- **C-18**: 모바일 반응형 디자인 고려

## 7. 용어 정의

- **할 일 (Todo)**: 사용자가 완료해야 하는 작업이나 일정
- **개인 할 일**: 특정 사용자가 생성하고 소유한 할 일
- **공통 할 일**: 모든 사용자에게 공통으로 표시되는 할 일 (국경일 등)
- **국경일 (Public Holiday)**: 법정 공휴일 또는 국가 기념일
- **휴지통 (Trash)**: 삭제된 할 일이 임시로 보관되는 논리적 공간
- **소프트 삭제 (Soft Delete)**: 데이터를 물리적으로 삭제하지 않고 삭제 플래그만 설정하는 방식
- **영구 삭제 (Hard Delete)**: 데이터를 데이터베이스에서 물리적으로 완전히 제거
- **만료 기한 (Due Date)**: 할 일을 완료해야 하는 목표 날짜

---

**작성일**: 2025-11-25
**버전**: 1.0
**상태**: 초안
